// RUN: xdsl-opt %s | xdsl-opt | filecheck %s


module() {

    // CHECK: irdl.dialect() ["dialect_name" = "cmath"] {
    irdl.dialect() ["dialect_name" = "cmath"] {

        // CHECK: irdl.type() ["type_name" = "complex"] {
        // CHECK: irdl.parameters() ["constraints" = [!named_type_constraint<"elementType", !any_of_type<!i32, !i64>>]]
        // CHECK: }
        irdl.type() ["type_name" = "complex"] {
            irdl.parameters() ["constraints" = [!named_type_constraint<"elementType", !any_of_type<!i32, !i64>>]]
        }

        // CHECK: irdl.operation() ["name" = "norm"] {
        // CHECK: irdl.operands() ["constraints" = [!named_type_constraint<"c", !dyn_type_params_constraint<"complex", [!any_of_type<!i32, !i64>]>>]]
        // CHECK: irdl.results() ["constraints" = [!named_type_constraint<"results", !any_of_type<!i32, !i64>>]]
        // CHECK: }
        irdl.operation() ["name" = "norm"] {
            irdl.operands() ["constraints" = [!named_type_constraint<"c", !dyn_type_params_constraint<"complex", [!any_of_type<!i32, !i64>]>>]]
            irdl.results() ["constraints" = [!named_type_constraint<"results", !any_of_type<!i32, !i64>>]]
        }

        // CHECK: irdl.operation() ["name" = "mul"] {
        // CHECK: irdl.operands() ["constraints" = [!named_type_constraint<"lhs", !dyn_type_params_constraint<"complex", [!any_of_type<!i32, !i64>]>>]] 
        // CHECK: irdl.operands() ["constraints" = [!named_type_constraint<"rhs", !dyn_type_params_constraint<"complex", [!any_of_type<!i32, !i64>]>>]]
        // CHECK: irdl.results() ["constraints" = [!named_type_constraint<"results", !any_of_type<!i32, !i64>>]]
        // CHECK: }
        irdl.operation() ["name" = "mul"] {
            irdl.operands() ["constraints" = [!named_type_constraint<"lhs", !dyn_type_params_constraint<"complex", [!any_of_type<!i32, !i64>]>>]] 
            irdl.operands() ["constraints" = [!named_type_constraint<"rhs", !dyn_type_params_constraint<"complex", [!any_of_type<!i32, !i64>]>>]]
            irdl.results() ["constraints" = [!named_type_constraint<"results", !any_of_type<!i32, !i64>>]]
        }
    }
}
